{% comment %}
Section: header.liquid
A clean, accessible eCommerce header using the logo from the brand object or the section setting fallback.
CSS is included below in a <style> tag (not inline). Minimal JS for mobile toggle included.
{% endcomment %}

<header class="site-header" role="banner">
    <div class="header-inner">
        <a class="brand" href="{{ shop.url }}">
            {% if section.settings.brand_logo %}
                <img src="{{ section.settings.brand_logo | img_url: '400x' }}" alt="{{ shop.name }}" class="brand-logo" />
            {% elsif brand and brand.logo %}
                <img src="{{ brand.logo | img_url: '400x' }}" alt="{{ shop.name }}" class="brand-logo" />
            {% else %}
                <span class="brand-text">{{ shop.name }}</span>
            {% endif %}
        </a>

        <nav class="site-nav" role="navigation" aria-label="{{ 'general.navigation' | t }}">
            <ul class="nav-list">
                {% if linklists.main-menu != nil %}
                    {% for link in linklists.main-menu.links %}
                        <li class="nav-item"><a href="{{ link.url }}" class="nav-link">{{ link.title }}</a></li>
                    {% endfor %}
                {% endif %}
            </ul>
        </nav>

        <div class="header-actions">
            <a class="action search-link" href="/search" aria-label="{{ 'layout.header.search_label' | t }}">üîç</a>
            <a class="action account-link" href="/account" aria-label="{{ 'layout.header.account_label' | t }}">üë§</a>
            <a class="action cart-link" href="/cart" aria-label="{{ 'layout.header.cart_label' | t }}">
                <span class="cart-icon">üõí</span>
                <span class="cart-count" aria-hidden="true">{{ cart.item_count }}</span>
            </a>
            <button class="menu-toggle" aria-expanded="false" aria-controls="mobile-nav" aria-label="Toggle menu">‚ò∞</button>
        </div>
    </div>

    <div id="mobile-nav" class="mobile-nav" hidden>
        <ul class="mobile-nav-list">
            {% if linklists.main-menu != nil %}
                {% for link in linklists.main-menu.links %}
                    <li class="mobile-nav-item"><a href="{{ link.url }}" class="mobile-nav-link">{{ link.title }}</a></li>
                {% endfor %}
            {% endif %}
            <li class="mobile-nav-item"><a href="/account" class="mobile-nav-link">Account</a></li>
            <li class="mobile-nav-item"><a href="/cart" class="mobile-nav-link">Cart ({{ cart.item_count }})</a></li>
        </ul>
    </div>
</header>

<style>
/* Header base */
.site-header {
    border-bottom: 1px solid rgba(0,0,0,0.08);
    background: #fff;
    position: relative;
    z-index: 50;
}
.header-inner {
    max-width: 1200px;
    margin: 0 auto;
    padding: 14px 20px;
    display: flex;
    align-items: center;
    gap: 20px;
}

/* Brand */
.brand {
    display: flex;
    align-items: center;
    text-decoration: none;
}
.brand-logo {
    max-height: 48px;
    width: auto;
    display: block;
}
.brand-text {
    font-weight: 600;
    font-size: 1.125rem;
    color: #111;
}

/* Navigation (desktop) */
.site-nav {
    flex: 1;
}
.nav-list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    gap: 18px;
}
.nav-link {
    color: #222;
    text-decoration: none;
    font-weight: 500;
    padding: 8px 0;
}
.nav-link:hover,
.nav-link:focus {
    color: #0a66ff;
    outline: none;
}

/* Header actions */
.header-actions {
    display: flex;
    align-items: center;
    gap: 12px;
}
.action {
    text-decoration: none;
    color: #222;
    font-size: 1rem;
}
.cart-count {
    display: inline-block;
    min-width: 20px;
    text-align: center;
    background: #0a66ff;
    color: #fff;
    border-radius: 999px;
    padding: 2px 6px;
    font-size: 0.8rem;
    margin-left: 6px;
}

/* Mobile nav */
.menu-toggle {
    display: none;
    background: transparent;
    border: none;
    font-size: 1.25rem;
    cursor: pointer;
}
.mobile-nav {
    background: #fff;
    border-top: 1px solid rgba(0,0,0,0.06);
}
.mobile-nav-list {
    list-style: none;
    margin: 0;
    padding: 12px 20px;
    display: flex;
    flex-direction: column;
    gap: 8px;
}
.mobile-nav-link {
    color: #111;
    text-decoration: none;
    padding: 10px 0;
}

/* Responsive */
@media (max-width: 860px) {
    .nav-list { display: none; }
    .menu-toggle { display: inline-flex; }
    .brand-logo { max-height: 40px; }
    .header-inner { padding: 12px 16px; gap: 12px; }
}
</style>

<script>
(function() {
    var toggle = document.querySelector('.menu-toggle');
    var mobile = document.getElementById('mobile-nav');
    if (!toggle || !mobile) return;
    toggle.addEventListener('click', function() {
        var expanded = this.getAttribute('aria-expanded') === 'true';
        this.setAttribute('aria-expanded', String(!expanded));
        if (expanded) {
            mobile.hidden = true;
        } else {
            mobile.hidden = false;
            mobile.focus && mobile.focus();
        }
    });
})();
</script>

{% schema %}
{
    "name": "Header",
    "settings": [
        {
            "type": "image_picker",
            "id": "brand_logo",
            "label": "Brand logo (section fallback)"
        }
    ],
    "presets": [
        {
            "name": "Header"
        }
    ]
}
{% endschema %}